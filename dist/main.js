(()=>{var e={32:e=>{const r=/^[0-9]+$/,t=/^-?[0-9]+$/,i=/^[0-9a-fA-F]+$/,n=/^[a-zA-Z0-9-_]+$/;function a(e){return null===e?"null":"boolean"==typeof e?"boolean":"number"==typeof e?"number":"string"==typeof e?"string":Array.isArray(e)?"array":null!==e&&"object"==typeof e&&e.constructor===Object?"object":""}function o(e,t,i){return i=void 0===i?"":u(i,"'"),e="number"===a(e)?String(e):e,r.test(e)?!(BigInt(e)>2n**64n-1n&&(t.error(i+"must fit in an unsigned 64-bit integer"),1)):(t.error(i+`must be an uint64 (must match ${r})`),!1)}function s(e,r,i){return i=void 0===i?"":u(i,"'"),e="number"===a(e)?String(e):e,t.test(e)?!((e=BigInt(e))<(-2n)**(32n-1n)||e>2n**(32n-1n)-1n)||(r.error(i+"must fit in a signed 32-bit integer"),!1):(r.error(i+`must be an int32 (must match ${t})`),!1)}function l(e,r,i){return i=void 0===i?"":u(i,"'"),e="number"===a(e)?String(e):e,t.test(e)?!((e=BigInt(e))<(-2n)**(64n-1n)||e>2n**(64n-1n)-1n)||(r.error(i+"must fit in a signed 64-bit integer"),!1):(r.error(i+`must be an int64 (must match ${t})`),!1)}function u(e,r){return""===e?e:((e=e.trim()).startsWith(r)||(e=r+e),e.endsWith(r)||(e+=r),e+" ")}function g(e,r){try{return new URL(e)}catch(e){r.error("invalid URL format")}}function c(e,r,t,i){if(i=void 0===i?"":u(i,"'"),r.length>t.max_filter_maps_per_filter_set)e.error(i+"array length exceeds the max filter maps per filter set limit");else for(let n=0;n<r.length;n++)if(d(e,r[n],t,i),e.errors.length>0)return}function d(e,r,t,i){if(i=void 0===i?"":u(i,"'"),Object.keys(r).length>t.max_attribution_filters)e.error(i+"exceeded max attribution filters");else for(key in r){if(keyString=u(key,"'"),t.should_check_filter_size&&new Blob([key]).size>t.max_bytes_per_attribution_filter_string)return void e.error(keyString+"exceeded max bytes per attribution filter string");if("_lookback_window"===key&&t["feature-lookback-window-filter"]){if(!t.can_include_lookback_window)return void e.error(i+"filter: _lookback_window is not allowed");if(!l(r[key],e,key))return;return Number(r[key])<0?void e.error("lookback_window must be a positive number"):void 0}if(key.startsWith("_"))return void e.error(keyString+"filter can not start with underscore");if(filterValues=r[key],"array"!==a(filterValues))return void e.error(keyString+"filter value must be an array");if(filterValues.length>t.max_values_per_attribution_filter)return void e.error(keyString+"exceeded max values per attribution filter");for(let r=0;r<filterValues.length;r++){let i=filterValues[r];if("string"!==a(i))return void e.error(keyString+"filter values must be strings");if(new Blob([i]).size>t.max_bytes_per_attribution_filter_string)return void e.error(u(i,"'")+"exceeded max bytes per attribution filter value string")}}}function _(e,r,t){for(key in r){let i=u(key,"'");if("_lookback_window"===key&&t["feature-lookback-window-filter"]){if("null"===a(r[key]))return void e.error(i+"must be a string or able to cast to string");if(!l(String(r[key]),e,key))return}else{if("array"!==a(r[key]))return void e.error(i+"filter value must be an array");let t=r[key];for(let r=0;r<t.length;r++)if("null"===a(t[r]))return void e.error(i+"filter values must be string or able to cast to string")}}}function f(e,r,t,i){i=void 0===i?"":u(i,"'"),null!==r&&""!==r?new Blob([r]).size>t.max_bytes_per_attribution_aggregate_key_id&&e.error(i+"exceeded max bytes per attribution aggregate key id string"):e.error(i+"null or empty aggregate key string")}function m(e,r,t){if(null===r||""===r)return void e.error("key piece value must not be null or empty string");if(!r.startsWith("0x")&&!r.startsWith("0X"))return void e.error("key piece value must start with '0x' or '0X'");let n=new Blob([r]).size;n<t.min_bytes_per_aggregate_value||n>t.max_bytes_per_aggregate_value?e.error("key piece value string size must be in the byte range (3 bytes - 34 bytes)"):r.substring(2).match(i)||e.error("key piece values must be hexadecimal")}function y(e,r,t){if(t=void 0===t?"":u(t,"'"),"array"===a(e)||"object"===a(e)){if("array"===a(e))for(let i=0;i<e.length;i++)if("object"!==a(e[i]))return void r.error(t+"must be an array of object(s)");return"object"===a(e)?[e]:e}r.error(t+"must be an object or an array")}e.exports={State:class{constructor(){this.path=[],this.errors=[],this.warnings=[]}error(e){this.errors.push({path:[...this.path],msg:e,formattedError:`${e}: \`${[...this.path]}\``})}warning(e){this.warnings.push({path:[...this.path],msg:e,formattedWarning:`${e}: \`${[...this.path]}\``})}scope(e,r){this.path.push(e),r(),this.path.pop()}result(){return{errors:this.errors,warnings:this.warnings}}validate(e,r){Object.entries(r).forEach((([r,t])=>{this.scope(r,(()=>t(this,r,e)))}))}},boolean:function(e=(()=>{}),r){return(t,i)=>{"boolean"!==a(i)?t.error("must be a boolean"):result=void 0===r?e(t,i):e(t,i,r)}},optBoolean:function(e=(()=>{}),r){return(t,i)=>{if("boolean"!==a(i)){if("string"===a(i)){if("true"===i.toLowerCase())return void(result=void 0===r?e(t,!0):e(t,!0,r));if("false"===i.toLowerCase())return void(result=void 0===r?e(t,!1):e(t,!1,r))}t.error("must be a boolean")}else result=void 0===r?e(t,i):e(t,i,r)}},optBooleanFallback:function(e=(()=>{}),r){return(t,i)=>{if("boolean"!==a(i)){if("string"===a(i)){if("true"===i)return void(result=void 0===r?e(t,!0):e(t,!0,r));if("false"===i)return void(result=void 0===r?e(t,!1):e(t,!1,r))}result=void 0===r?e(t,!1):e(t,!1,r)}else result=void 0===r?e(t,i):e(t,i,r)}},uint64:function(e=(()=>{}),t){return(i,n)=>{r.test(n)?BigInt(n)>2n**64n-1n?i.error("must fit in an unsigned 64-bit integer"):result=void 0===t?e(i,n):e(i,n,t):i.error(`must be an uint64 (must match ${r})`)}},int64:function(e=(()=>{}),r){return(i,n)=>{t.test(n)?(n=BigInt(n))<(-2n)**(64n-1n)||n>2n**(64n-1n)-1n?i.error("must fit in a signed 64-bit integer"):result=void 0===r?e(i,n):e(i,n,r):i.error(`must be an int64 (must match ${t})`)}},string:function(e=(()=>{}),r){return(t,i)=>{"string"!==a(i)?t.error("must be a string"):result=void 0===r?e(t,i):e(t,i,r)}},optString:function(e=(()=>{}),r){return(t,i)=>{"string"!==a(i)?"null"===a(i)?t.error("must be a string or able to cast to string"):result=void 0===r?e(t,String(i)):e(t,String(i),r):result=void 0===r?e(t,i):e(t,i,r)}},optStringFallback:function(e=(()=>{}),r){return(t,i)=>{"string"===a(i)?result=void 0===r?e(t,i):e(t,i,r):"null"!==a(i)?result=void 0===r?e(t,String(i)):e(t,String(i),r):result=void 0===r?e(t,""):e(t,"",r)}},object:function(e=(()=>{}),r){return(t,i)=>{"object"!==a(i)?t.error("must be an object"):result=void 0===r?e(t,i):e(t,i,r)}},array:function(e=(()=>{}),r){return(t,i)=>{"array"!==a(i)?t.error("must be an array"):result=void 0===r?e(t,i):e(t,i,r)}},optArray:function(e=(()=>{}),r,t){return(i,n)=>{if("array"!==a(n))return null!==r?a(n)===r?void(result=void 0===t?e(i,[n]):e(i,[n],t)):void i.error("must be a "+r+" or an array of "+r):"null"!==a(n)?void(result=void 0===t?e(i,[n]):e(i,[n],t)):void i.error("must be a array or able to cast to array");result=void 0===t?e(i,n):e(i,n,t)}},optional:function(e=(()=>{}),r){return(t,i,n)=>{i in n&&null!==n[i]&&(result=void 0===r?e(t,n[i]):e(t,n[i],r))}},getDataType:a,formatKeys:function(e){for(key in newJSON={},e)newJSON[key.toLowerCase()]=e[key];return newJSON},isValidAppDestinationHost:function(e,r){let t=g(r,e);e.errors.length>0||"android-app:"!==t.protocol&&e.error("app URL host/scheme is invalid")},isValidWebDestinationHost:function(e,t,i){for(element in t)if("string"!==a(element))return void e.error("must be a string or an array of strings");if(t.length>i.max_distinct_web_destinations_in_source_registration)e.error("exceeded max distinct web destinations");else if(0!==t.length)for(let a=0;a<t.length;a++){let o=g(t[a],e);if(e.errors.length>0)return;if(!o.protocol)return void e.error("URL is missing scheme/protocol");if(!o.hostname)return void e.error("URL is missing hostname/domain");if("https:"===o.protocol&&("127.0.0.1"===o.hostname||"localhost"===o.hostname))return;let s=o.hostname.toLowerCase().replace(".。．｡",".");if("."===s.charAt(s.length-1)&&(s=s.substring(0,s.length-1)),s.length>i.max_web_destination_hostname_character_length)return void e.error("URL hostname/domain exceeds max character length");let l=s.split(".");if(l.length>i.max_web_destination_hostname_parts)return void e.error("exceeded the max number of URL hostname parts");for(let t=0;t<l.length;t++){let a=l[t];if(a.length<i.min_web_destination_hostname_part_character_length||a.length>i.max_web_destination_hostname_part_character_length)return void e.error("URL hostname part character length must be in the range of 1-63");if(!a.match(n))return void e.error("URL hostname part character length must alphanumeric, hyphen, or underscore");if(invalidCharacters="-_",invalidCharacters.includes(a.charAt(0))||invalidCharacters.includes(a.charAt(a.length-1)))return void e.error("invalid URL hostname part starting/ending character (hypen/underscore)");if(t===l.length-1&&a.charAt(0).match(r))return void e.error("last hostname part can not start with a number")}}else e.error("no web destinations present")},isValidSourceFilterData:function(e,r,t){t.can_include_lookback_window=!1,t.should_check_filter_size=!0,"source_type"in r?e.error("filter: source_type is not allowed"):d(e,r,t)},isValidTriggerMatchingData:function(e,r){"modulus"===r.toLowerCase()||"exact"===r.toLowerCase()||e.error("value must be 'exact' or 'modulus' (case-insensitive)")},isValidAggregationKeys:function(e,r,t){if(Object.keys(r).length>t.max_aggregate_keys_per_source_registration)e.error("exceeded max number of aggregation keys per source registration");else for(aggregateKey in r){if(f(e,aggregateKey,t),e.errors.length>0)return;let i=r[aggregateKey];"string"!==a(i)&&"null"!==a(i)&&(i=String(i)),m(e,i,t)}},isValidAttributionScopes:function(e,r,t){if("source"===t.header_type){if(!t.attribution_scope_limit_present&&r.length>0)return void e.error("attribution scopes array must be empty if attribution scope limit is not present");if(!t.attribution_scope_limit_present&&t.max_event_states_present)return void e.error("max event states must not be present if attribution scope limit is not present");if(t.attribution_scope_limit_present&&r.length>t.attribution_scope_limit_value)return void e.error("attribution scopes array size exceeds the provided attribution_scope_limit")}for(let t=0;t<r.length;t++)if("string"!==a(r[t]))return void e.error("must be an array of strings");if(r.length>t.max_attribution_scopes_per_source)e.error("exceeded max number of scopes per source");else for(let i=0;i<r.length;i++)if(r[i].length>t.max_attribution_scope_string_length)return void e.error("exceeded max scope string length")},isValidAttributionScopeLimit:function(e,r,t){r<=0&&e.error("must be greater than 0"),t.attribution_scope_limit_value=r},isValidMaxEventStates:function(e,r,t){r<=0&&e.error("must be greater than 0"),r>t.max_report_states_per_source_registration&&e.error("exceeds max report states per source registration")},isValidXNetworkKeyMapping:function(e,r){for(key in r){if(xNetworkValue=r[key],null===xNetworkValue)return void e.error("all values must be non-null");if("string"!==a(xNetworkValue))return void e.error("all values must be strings");if(!xNetworkValue.startsWith("0x"))return void e.error("all values must start with 0x")}},isValidAggregationCoordinatorOrigin:function(e,r){""!==r?(g(r,e),e.errors.length):e.error("value must be non-empty")},isValidAggregatableSourceRegistrationTime:function(e,r,t){"INCLUDE"===r.toUpperCase()||"EXCLUDE"===r.toUpperCase()?t.aggregatable_source_registration_time_value=r.toUpperCase():e.error("must equal 'INCLUDE' or 'EXCLUDE' (case-insensitive)")},isValidTriggerContextId:function(e,r,t){"INCLUDE"!==t.aggregatable_source_registration_time_value?r.length>t.max_trigger_context_id_string_length&&e.error("max string length exceeded"):e.error("aggregatable_source_registration_time must not have the value 'INCLUDE'")},isValidEventTriggerData:function(e,r,t){t.can_include_lookback_window=!0,t.should_check_filter_size=!t["feature-enable-update-trigger-header-limit"];for(let t=0;t<r.length;t++)if("object"!==a(r[t]))return void e.error("must be an array of object(s)");for(let i=0;i<r.length;i++){let n=r[i];for(key in n){if("trigger_data"===key&&null!==n[key]){if("string"!==a(n[key]))return void e.error("'trigger_data' must be a string");if(!o(n[key],e,key))return}if("priority"===key&&null!==n[key]){if("string"!==a(n[key]))return void e.error("'priority' must be a string");if(!l(n[key],e,key))return}if("value"===key&&null!==n[key]){if("number"!==a(n[key]))return void e.error("'value' must be a number");if(!l(n[key],e,key))return;if(n[key]<1)return void e.error("'value' must be greater than 0");if(n[key]>t.max_bucket_threshold)return void e.error("'value' exceeds max threshold of "+t.max_bucket_threshold)}if("deduplication_key"===key&&null!==n[key]){if("string"!==a(n[key]))return void e.error("'deduplication_key' must be a string");if(!o(n[key],e,key))return}if(("filters"===key||"not_filters"===key)&&null!==n[key]){let r=y(n[key],e,key);if(e.errors.length>0)return;c(e,r,t,key)}}}},isValidAggregatableTriggerData:function(e,r,t){t.can_include_lookback_window=!0,t.should_check_filter_size=!t["feature-enable-update-trigger-header-limit"];for(let t=0;t<r.length;t++)if("object"!==a(r[t]))return void e.error("must be an array of object(s)");for(let i=0;i<r.length;i++){let n=r[i];if(!("key_piece"in n))return void e.error("'key_piece' must be present in each element/object of the array");for(key in n){if("key_piece"===key&&(m(e,n[key],t),e.errors.length>0))return;if("source_keys"===key&&null!==n[key]){if("array"!==a(n[key]))return void e.error("'source_keys' must be an array");if(t.should_check_filter_size&&n[key].length>t.max_aggregate_keys_per_trigger_registration)return void e.error("'source_keys' array size exceeds max aggregate keys per trigger registration limit");for(let r=0;r<n[key].length;r++){if("string"!==a(n[key][r]))return void e.error("each element in 'source_keys' must be a string");if(f(e,n[key][r],t,key),e.errors.length>0)return}}if(("filters"===key||"not_filters"===key)&&null!==n[key]){let r=y(n[key],e,key);if(e.errors.length>0)return;if(c(e,r,t,key),e.errors.length>0)return}if("x_network_data"===key&&null!==n[key]&&"object"!==a(n[key]))return void e.error("'x_network_data' must be an object")}}},isValidAggregatableValues:function(e,r,t){if(t.should_check_filter_size=!t["feature-enable-update-trigger-header-limit"],t.should_check_filter_size&&Object.keys(r).length>t.max_aggregate_keys_per_trigger_registration)e.error("exceeds max aggregate keys per trigger registration");else for(aggregateKey in r){if(f(e,aggregateKey,t),e.errors.length>0)return;if("number"!==a(r[aggregateKey]))return void e.error("aggregate key value must be a number");if(!s(r[aggregateKey],e))return;if(r[aggregateKey]<1)return void e.error("aggregate key value must be greater than 0");if(r[aggregateKey]>t.max_sum_of_aggregate_values_per_source)return void e.error("aggregate key value exceeds the max sum of aggregate values per source")}},isValidTriggerFilters:function(e,r,t){t.can_include_lookback_window=!0,t.should_check_filter_size=!t["feature-enable-update-trigger-header-limit"];let i=y(r,e);e.errors.length>0||c(e,i,t)},isValidAggregatableDeduplicationKey:function(e,r,t){if(t.can_include_lookback_window=!0,t.should_check_filter_size=!t["feature-enable-update-trigger-header-limit"],r.length>t.max_aggregate_deduplication_keys_per_registration)e.error("exceeds max aggregate deduplication keys per registration limit");else{for(let t=0;t<r.length;t++)if("object"!==a(r[t]))return void e.error("must be an array of object(s)");for(let i=0;i<r.length;i++){let n=r[i];for(key in n){if("deduplication_key"===key&&null!==n[key]){if("string"!==a(n[key]))return void e.error(u(key,"'")+"must be a string");if(!o(n[key],e,key))return}if(("filters"===key||"not_filters"===key)&&null!==n[key]){let r=y(n[key],e,key);if(e.errors.length>0)return;if(c(e,r,t,key),e.errors.length>0)return}}}}},isValidAttributionConfig:function(e,r,t){for(let t=0;t<r.length;t++)if("object"!==a(r[t]))return void e.error("must be an array of object(s)");for(let i=0;i<r.length;i++){let n=r[i];if(!("source_network"in n)||null===n.source_network)return void e.error("'source_network' must be present and non-null in each element/object of the array");for(key in n){if("source_network"===key&&"null"===a(n[key]))return void e.error(u(key,"'")+"must be a string or able to cast to string");if("source_priority_range"===key&&null!==n[key]){if("object"!==a(n[key]))return void e.error(u(key,"'")+"must be an object");if(!("start"in n[key])||!("end"in n[key]))return void e.error(u(key,"'")+"both keys ('start','end') must be present");if(null===n[key].start||null===n[key].end)return void e.error(u(key,"'")+"both key values (start, end) must be string or able to cast to string");if(!l(n[key].start,e,"start")||!l(n[key].end,e,"end"))return}if(("source_filters"===key||"source_not_filters"===key||"filter_data"===key)&&null!==n[key]){let r=y(n[key],e,key);if(e.errors.length>0)return;for(let i=0;i<r.length;i++)if(_(e,r[i],t),e.errors.length>0)return}if(("source_expiry_override"===key||"priority"===key||"expiry"===key||"post_install_exclusivity_window"===key)&&null!==n[key]&&!l(n[key],e,key))return}}},isValidLocation:function(e,r){g(r,e),e.errors.length},isValidAttributionReportingRedirect:function(e,r,t){r.length>t.max_registration_redirects&&e.warning("max allowed reporting redirects: "+t.max_registration_redirects+", all other reporting redirects will be ignored");for(let i=0;i<Math.min(r.length,t.max_registration_redirects);i++){if("string"!==a(r[i]))return void e.error("must be an array of strings");if(g(r[i],e),e.errors.length>0)return}}}},924:(e,r,t)=>{const{State:i,optional:n,string:a,array:o,isValidLocation:s,isValidAttributionReportingRedirect:l,formatKeys:u}=t(32);e.exports={validateRedirect:function(e,r){try{redirectJSON=JSON.parse(e),redirectJSON=u(redirectJSON)}catch(e){return{errors:[e instanceof Error?e.toString():"unknown error"],warnings:[]}}const t=new i;let g={};return g.location=n(a(s)),g["attribution-reporting-redirect"]=n(o(l,r)),g["attribution-reporting-redirect-config"]=n(a()),t.validate(redirectJSON,g,r),t.result()}}},554:(e,r,t)=>{const{State:i,optBoolean:n,optBooleanFallback:a,uint64:o,int64:s,string:l,optString:u,optStringFallback:g,object:c,array:d,optArray:_,optional:f,formatKeys:m,isValidAppDestinationHost:y,isValidWebDestinationHost:b,isValidSourceFilterData:h,isValidTriggerMatchingData:p,isValidAggregationKeys:k,isValidAttributionScopes:v,isValidAttributionScopeLimit:x,isValidMaxEventStates:w}=t(32);e.exports={validateSource:function(e,r){try{sourceJSON=JSON.parse(e),sourceJSON=m(sourceJSON)}catch(e){return{errors:[e instanceof Error?e.toString():"unknown error"],warnings:[]}}const t=new i;let S={};return"destination"in sourceJSON&&null!==sourceJSON.destination||"web_destination"in sourceJSON&&null!==sourceJSON.web_destination?(S.destination=f(u(y)),S.web_destination=f(),S.source_event_id=f(l(o())),S.expiry=f(u(o())),S.event_report_window=f(u(o())),S.aggregatable_report_window=f(u(o())),S.priority=f(l(s())),S.debug_key=f(l(o())),S.debug_reporting=f(a()),S.install_attribution_window=f(u(s())),S.post_install_exclusivity_window=f(u(s())),S.debug_ad_id=f(g()),S.debug_join_key=f(g()),S.web_destination=f(_(b,"string",r)),S.filter_data=f(c(h,r)),S.aggregation_keys=f(c(k,r)),r["feature-attribution-scopes"]&&(r.max_event_states_present="max_event_states"in sourceJSON,r.attribution_scope_limit_present="attribution_scope_limit"in sourceJSON,S.attribution_scope_limit=f(u(s(x,r))),S.max_event_states=f(u(s(w,r))),S.attribution_scopes=f(d(v,r))),r["feature-trigger-data-matching"]&&(S.trigger_data_matching=f(u(p))),r["feature-coarse-event-report-destination"]&&(S.coarse_event_report_destinations=f(n())),r["feature-shared-source-debug-key"]&&(S.shared_debug_key=f(u(o()))),r["feature-xna"]&&(S.shared_aggregation_keys=f(d())),r["feature-shared-filter-data-keys"]&&(S.shared_filter_data_keys=f(d())),r["feature-preinstall-check"]&&(S.drop_source_if_installed=f(n())),r["feature-enable-reinstall-reattribution"]&&(S.reinstall_reattribution_window=f(u(s()))),t.validate(sourceJSON,S,r),t.result()):{errors:[{path:["destination or web_destination"],msg:"At least one field must be present and non-null",formattedError:"at least one field must be present and non-null: `destination or web_destination`"}],warnings:[]}}}},731:(e,r,t)=>{const{State:i,optional:n,uint64:a,string:o,array:s,optBooleanFallback:l,optString:u,optStringFallback:g,object:c,formatKeys:d,isValidAttributionScopes:_,isValidXNetworkKeyMapping:f,isValidAggregationCoordinatorOrigin:m,isValidAggregatableSourceRegistrationTime:y,isValidTriggerContextId:b,isValidEventTriggerData:h,isValidAggregatableTriggerData:p,isValidAggregatableValues:k,isValidTriggerFilters:v,isValidAggregatableDeduplicationKey:x,isValidAttributionConfig:w}=t(32);e.exports={validateTrigger:function(e,r){try{triggerJSON=JSON.parse(e),triggerJSON=d(triggerJSON)}catch(e){return{errors:[e instanceof Error?e.toString():"unknown error"],warnings:[]}}const t=new i;let S={};return S.debug_key=n(o(a())),S.debug_join_key=n(g()),S.debug_reporting=n(l()),S.debug_ad_id=n(g()),S.event_trigger_data=n(s(h,r)),S.aggregatable_trigger_data=n(s(p,r)),S.aggregatable_values=n(c(k,r)),S.filters=n(v,r),S.not_filters=n(v,r),S.aggregatable_deduplication_keys=n(s(x,r)),r["feature-attribution-scopes"]&&(S.attribution_scopes=n(s(_,r))),r["feature-xna"]&&(S.x_network_key_mapping=n(c(f)),S.attribution_config=n(s(w,r))),r["feature-aggregation-coordinator-origin"]&&(S.aggregation_coordinator_origin=n(u(m))),r["feature-source-registration-time-optional-for-agg-reports"]&&(S.aggregatable_source_registration_time=n(g(y,r))),r["feature-trigger-context-id"]&&(S.trigger_context_id=n(o(b,r))),t.validate(triggerJSON,S,r),t.result()}}}},r={};function t(i){var n=r[i];if(void 0!==n)return n.exports;var a=r[i]={exports:{}};return e[i](a,a.exports,t),a.exports}(()=>{const{validateSource:e}=t(554),{validateTrigger:r}=t(731),{validateRedirect:i}=t(924),n=document.getElementById("validation-form"),a=document.getElementById("input-text"),o=n.elements.namedItem("header"),s=document.getElementById("linkify"),l=document.getElementById("errors"),u=document.getElementById("warnings"),g=document.getElementById("notes"),c=document.getElementById("success");function d(e,r){e.replaceChildren([]),r.forEach((function(r){let t=document.createElement("li");t.textContent="string"==typeof r?r:r.msg+": "+r.path,e.appendChild(t)}))}function _(){let t,n={"feature-lookback-window-filter":!0,"feature-trigger-data-matching":!0,"feature-coarse-event-report-destination":!0,"feature-shared-source-debug-key":!0,"feature-xna":!0,"feature-shared-filter-data-keys":!0,"feature-preinstall-check":!0,"feature-attribution-scopes":!1,"feature-aggregation-coordinator-origin":!0,"feature-source-registration-time-optional-for-agg-reports":!1,"feature-trigger-context-id":!1,"feature-enable-update-trigger-header-limit":!1,"feature-enable-reinstall-reattribution":!0,max_attribution_filters:50,max_bytes_per_attribution_filter_string:25,max_values_per_attribution_filter:50,max_distinct_web_destinations_in_source_registration:3,max_web_destination_hostname_character_length:253,max_web_destination_hostname_parts:127,min_web_destination_hostname_part_character_length:1,max_web_destination_hostname_part_character_length:63,max_aggregate_keys_per_source_registration:50,max_bytes_per_attribution_aggregate_key_id:25,min_bytes_per_aggregate_value:3,max_bytes_per_aggregate_value:34,max_attribution_scopes_per_source:20,max_attribution_scope_string_length:50,max_report_states_per_source_registration:(1n<<32n)-1n,max_trigger_context_id_string_length:64,max_bucket_threshold:(1n<<32n)-1n,max_filter_maps_per_filter_set:20,max_aggregate_keys_per_trigger_registration:50,max_sum_of_aggregate_values_per_source:65536,max_aggregate_deduplication_keys_per_registration:50,max_registration_redirects:20};n.header_type=o.value,"source"===o.value?t=e(a.value,n):"trigger"===o.value?t=r(a.value,n):"redirect"===o.value&&(a.placeholder='{\n   "Location": "",\n   "Attribution-Reporting-Redirect-Config": "",\n   "Attribution-Reporting-Redirect": []\n}',t=i(a.value,n)),c.textContent=0===t.errors.length?"The header is valid.":"",d(l,t.errors),d(u,t.warnings),d(g,[])}n.addEventListener("input",_),s.addEventListener("click",(async function(){const e=new URL(location.toString());e.search="",e.searchParams.set("header",o.value),e.searchParams.set("json",a.value),await navigator.clipboard.writeText(e.toString())})),function(){let e=new URLSearchParams(location.search),r=e.get("json"),t=e.get("header");r&&(a.value=r),t&&(o.value=t)}(),_()})()})();